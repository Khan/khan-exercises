<!DOCTYPE html>
<html data-require="math math-format">
<head>
	<title>Adding and subtracting mixed numbers 2</title>
	<script src="../khan-exercise.js"></script>
</head>

<!--
NEED TO ADD 2-4 #s, NOT JUST 2
-->

<body>
	<div class="exercise">

		<div class="problems">
			<div id="two-numbers">
				<div class="vars">

					<var id="W1">randRangeNonZero( -19, 19 )</var>
					<var id="W2" data-ensure="W1 !== W2">randRangeNonZero( -19, 19 )</var>
					<var id="PM">randRangeNonZero( -1, 1 )</var>
					<var id="SIGN">( PM === 1 ? "+" : "-")</var>
					<var id="SIGN1">( W1 / abs( W1 ) === 1 ? "+" : "-")</var>
					<var id="SIGN2">( PM * W2 / abs( W2 ) === 1 ? "+" : "-")</var>
					
					<div data-ensure="getLCM( D1, D2 ) < 61 && D1 !== D2">
						<var id="D1">randRange( 3, 20 )</var>
						<var id="D2">randRange( 3, 20 )</var>
					</div>
					<!-- this ensures no regrouping / carrying from fractions to whole #s -->
					<div data-ensure="W1 + PM * W2 > 0 ? (N1_SIGNED / D1) + PM * (N2_SIGNED / D2) < 1 && (N1_SIGNED / D1) + PM * (N2_SIGNED / D2) > 0 : (N1_SIGNED / D1) + PM * (N2_SIGNED / D2) < 0 && (N1_SIGNED / D1) + PM * (N2_SIGNED / D2) > -1">
						<var id="N1">randRange( 1, D1 - 1 )</var>
						<var id="N2">randRange( 1, D2 - 1 )</var>
						<var id="N1_SIGNED">W1 / abs( W1 ) * N1</var>
						<var id="N2_SIGNED">W2 / abs( W2 ) * N2</var>
					</div>

					<var id="GCD1">getGCD( N1, D1 )</var>
					<var id="SIMP_N1">N1 / GCD1</var>
					<var id="SIMP_D1">D1 / GCD1</var>
					
					<var id="GCD2">getGCD( N2, D2 )</var>
					<var id="SIMP_N2">N2 / GCD2</var>
					<var id="SIMP_D2">D2 / GCD2</var>

					<var id="LCM">getLCM( SIMP_D1, SIMP_D2 )</var>
					<var id="GCD">getGCD( N1_SIGNED * LCM / D1 + PM * N2_SIGNED * LCM / D2 , LCM )</var>

				</div>
				<p class="problem">Write the following as a mixed number. Simplify your answer to lowest terms.</p>
				<div class="question">
					<p data-if="W2 == abs( W2 )"><code><var>expr([SIGN, W1 + fraction( N1, D1 ), W2 + fraction( N2, D2 )])</var> = ?</code></p>
					<p data-else><code><var>expr([SIGN, W1 + fraction( N1, D1 ), ["+", , W2 + fraction( N2, D2 )]])</var> = ?</code></p>
				</div>
				<div class="solution" data-type="mixed"><var>W1 + PM * W2 + ( N1_SIGNED D1 + PM * N2_SIGNED / D2 )</var></span></div>

				<div class="hints">

					<div>
						<p>Separate the terms, get rid of parentheses:</p>
						<p><code>= \color{red}{<var>W1</var>} + \color{red}{<var>fraction( N1_SIGNED , D1 )</var>} + \color{blue}{<var>PM * W2</var>} + \color{blue}{<var>fraction( PM * N2_SIGNED, D2 )</var>}</code></p>
					</div>
					
					<div>
						<p>Put whole #s and fractions together:</p>
						<p><code>= \color{red}{<var>W1</var>} + \color{blue}{<var>PM * W2 </var>} + \color{red}{<var>fraction( N1_SIGNED , D1 )</var>} + \color{blue}{<var>fraction( PM * N2_SIGNED, D2 )</var>}</code></p>
					</div>
					
					<div data-if="GCD1 !== 1 || GCD2 !== 1">
						<p>Simplify each fraction:</p>
						<p><code>= \color{red}{<var>W1</var>} <var>SIGN2</var> \color{blue}{<var>abs( W2 )</var>} <var>SIGN1</var> \color{red}{<var>fraction( SIMP_N1, SIMP_D1 )</var>} <var>SIGN2</var> \color{blue}{<var>fraction( SIMP_N2, SIMP_D2 )</var>}</code></p>
					</div>
				
					<div>
						<p>Combine the whole #s<span data-if="SIMP_D1 !== SIMP_D2">, find a common denominator for the fractions</span>:</p>
						<p><code>= <var>expr(["+", W1 + PM * W2, fraction( N1_SIGNED * LCM / D1, LCM ), fraction( PM * N2_SIGNED * LCM / D2, LCM )])</var></code></p>
					</div>
					
					<div>
						<p>Add the fractions, then combine:</p>
						<p><code>= <var>expr(["+", W1 + PM * W2, fraction( N1_SIGNED * LCM / D1 + PM * N2_SIGNED * LCM / D2, LCM )])</var></code></p>
						<p><code>= <var>W1 + PM * W2 + fraction( abs( N1_SIGNED * LCM / D1 + PM * N2_SIGNED * LCM / D2 ) , LCM )</var></code></p>
					</div>
					
					<div data-if="GCD > 1">
						<p>Simplify to lowest terms:</p>
						<p><code>= <var>W1 + PM * W2 + fractionReduce( abs( N1_SIGNED * LCM / D1 + PM * N2_SIGNED * LCM / D2) , LCM )</var></code></p>
					</div>
				</div>
			</div>
		</div>

</body>
</html>
