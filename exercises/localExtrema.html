<!DOCTYPE html>
<html data-require="math math-format graphie">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Local minima</title>
    <script src="../khan-exercise.js"></script>
</head>
<body>
    <div class="exercise">
    <div class="vars" data-ensure="rootA < rootB && rootB < rootC && rootA < rootC">
        <var id="rootA">randRange(-4, 2)</var>
        <var id="rootB">randRange(-3, 3)</var>
        <var id="rootC">randRange(-2, 4)</var>
    </div>
    <div class="vars">
        <var id="signD">2*randRange(0, 1) - 1</var>

        <var id="polCoef0">0</var>
        <var id="polCoef1">-rootA*rootB*rootC*signD</var>
        <var id="polCoef2">1/2*(rootA*rootB+rootB*rootC+rootC*rootA)*signD</var>
        <var id="polCoef3">-1/3*(rootA+rootB+rootC)*signD</var>
        <var id="polCoef4">signD / 4</var>

        <var id="PolRootA">polCoef0 + polCoef1* rootA + polCoef2 * rootA*rootA + polCoef3 * rootA * rootA * rootA + polCoef4 * rootA * rootA * rootA * rootA</var>
        <var id="PolRootB">polCoef0 + polCoef1* rootB + polCoef2 * rootB*rootB + polCoef3 * rootB * rootB * rootB + polCoef4 * rootB * rootB * rootB * rootB</var>
        <var id="PolRootC">polCoef0 + polCoef1* rootC + polCoef2 * rootC*rootC + polCoef3 * rootC * rootC * rootC + polCoef4 * rootC * rootC * rootC * rootC</var>

		<var id="minVal">min(PolRootA, PolRootB, PolRootC) - 1</var>
		<var id="maxVal">max(PolRootA, PolRootB, PolRootC) + 1</var>

        <var id="FUNC">function( x ) {
            return (polCoef1*x + polCoef2*x*x + polCoef3*x*x*x + polCoef4*x*x*x*x) * 5 / (maxVal - minVal);
        }</var>

        <var id="prettyPolCoef1">fractionReduce.apply(KhanUtil, toFraction(polCoef1, 0.001))</var>
        <var id="prettyPolCoef2">fractionReduce.apply(KhanUtil, toFraction(polCoef2, 0.001))</var>
        <var id="prettyPolCoef3">fractionReduce.apply(KhanUtil, toFraction(polCoef3, 0.001))</var>
        <var id="prettyPolCoef4">fractionReduce.apply(KhanUtil, toFraction(polCoef4, 0.001))</var>

        <var id="dPolCoef0">-rootA*rootB*rootC*signD</var>
        <var id="dPolCoef1">(rootA*rootB+rootB*rootC+rootC*rootA)*signD</var>
        <var id="dPolCoef2">-(rootA+rootB+rootC)*signD</var>
        <var id="dPolCoef3">signD</var>

        <var id="ddPolCoef0">dPolCoef1</var>
        <var id="ddPolCoef1">2*dPolCoef2</var>
        <var id="ddPolCoef2">3*dPolCoef3</var>

        <var id="ddPolRootA">ddPolCoef0 + ddPolCoef1* rootA + ddPolCoef2 * rootA*rootA</var>
        <var id="ddPolRootB">ddPolCoef0 + ddPolCoef1* rootB + ddPolCoef2 * rootB*rootB</var>
        <var id="ddPolRootC">ddPolCoef0 + ddPolCoef1* rootC + ddPolCoef2 * rootC*rootC</var>
    </div>

    <div class="problems">
        <div>
            <div class="question">
                <p>Locate local minima of  
                    <code>p(x) = <var>prettyPolCoef1</var>x + <var>prettyPolCoef2</var>x^2 + <var>prettyPolCoef3</var> x^3 + <var>prettyPolCoef4</var> x^4</code>
                <div id="graph" class="graphie">
                        graphInit({
                            range: 5,
                            scale: 40,
                            tickStep: 1,
                            axisArrows: "<->"
                        });

                        style({
                            stroke: "#6495ED",
                        });

                        plot( FUNC, [-5, 5]);

                        style({
                            stroke: "#05ca00"
                        });
                 </div>
            </div>

            <div class="solution" data-type="set">
                <div class="set-sol" data-if="ddPolRootA > 0"><var>rootA</var></div>
                <div class="set-sol" data-if="ddPolRootB > 0"><var>rootB</var></div>
                <div class="set-sol" data-if="ddPolRootC > 0"><var>rootC</var></div>
                <div class="input-format">
                    <p>Local minimas</p>
                    <p><code>x = \quad </code><span class="entry"></span></p>
                    <p><code>x = \quad </code><span class="entry"></span></p>
                </div>
<!--
                <div class="set-sol" data-if="ddPolRootA < 0"><var>rootA</var></div>
                <div class="set-sol" data-if="ddPolRootB < 0"><var>rootB</var></div>
                <div class="set-sol" data-if="ddPolRootC < 0"><var>rootC</var></div>
                <div class="input-format">
                    <p>Maxima</p>
                    <p><code>x = \quad </code><span class="entry"></span></p>
                    <p><code>x = \quad </code><span class="entry"></span></p>
                    <p><code>x = \quad </code><span class="entry"></span></p>
                </div>
-->
            </div>
        </div>
    </div>
    <div class="hints">
        <p>Determine the derivative of <code>p(x)</code>.</p>
        <p><code>\frac{d}{dx} p(x) = <var>dPolCoef0</var> + <var>dPolCoef1</var>x + <var>dPolCoef2</var> x^2 + <var>dPolCoef3</var> x^3</code>
        <p>Locate roots of the derivative.</p>
        <p><code>\frac{d}{dx} p(x) = <var>signD</var> (x-<var>rootA</var>) (x - <var>rootB</var>) (x - <var>rootC</var>)</code>
        <p>Determine the second derivative of <code>p(x)</code>.</p>
        <p><code>\frac{d^2}{dx^2} p(x) = <var>ddPolCoef0</var> + <var>ddPolCoef1</var> x + <var>ddPolCoef2</var> x^2</code>
        <p>Evaluate the second derivative at the roots of the derivative.</p>
        <p data-if="ddPolRootA > 0"><code>\frac{d^2}{dx^2} p(<var>rootA</var>) = <var>ddPolRootA</var></code> is positive so there is a local minima at <var>rootA</var>.  </p>
        <p data-if="ddPolRootA < 0"><code>\frac{d^2}{dx^2} p(<var>rootA</var>) = <var>ddPolRootA</var></code> is negative so there is a local maxima at <var>rootA</var>.  </p>
        <p data-if="ddPolRootB > 0"><code>\frac{d^2}{dx^2} p(<var>rootB</var>) = <var>ddPolRootB</var></code> is positive so there is a local minima at <var>rootB</var>.  </p>
        <p data-if="ddPolRootB < 0"><code>\frac{d^2}{dx^2} p(<var>rootB</var>) = <var>ddPolRootB</var></code> is negative so there is a local maxima at <var>rootB</var>.  </p>
        <p data-if="ddPolRootC > 0"><code>\frac{d^2}{dx^2} p(<var>rootC</var>) = <var>ddPolRootC</var></code> is positive so there is a local minima at <var>rootC</var>.  </p>
        <p data-if="ddPolRootC < 0"><code>\frac{d^2}{dx^2} p(<var>rootC</var>) = <var>ddPolRootC</var></code> is negative so there is a local maxima at <var>rootC</var>.  </p>
        <div>
            <p>There are local minimas at:
                <span data-if="ddPolRootA > 0">x = <var>rootA</var> and </span>
                <span data-if="ddPolRootB > 0">x = <var>rootB</var></span>
                <span data-if="ddPolRootC > 0">x = <var>rootC</var></span>
            </p>
        </div>
    </div>
    </div>
</body>
</html>
