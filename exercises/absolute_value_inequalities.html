<!DOCTYPE html>
<html data-require="math math-format expressions graphie graphie-helpers interactive">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Absolute Value Inequalities</title>
    <script src="../khan-exercise.js"></script>
    <script>
        var circlesFilled;
        var centerFilled;
         
        function setCirclesFilled(val) {
            circlesFilled = val;
            KhanUtil.currentGraph.drawLines();
        }

        function setCenterFilled(val) {
            centerFilled = val;
            KhanUtil.currentGraph.drawLines();
        }
    </script>
</head>
<body>
    <div class="exercise">
    <div class="vars">
        <var id="A">randRangeNonZero(-5, 5)</var>
        <var id="B" data-ensure="B !== A">randRange(1, 5)</var>
        <var id="START_PT_A" data-ensure="START_PT_A !== A &amp;&amp; START_PT_A !== B">randRange(-9, 9)</var>
        <var id="START_PT_B" data-ensure="START_PT_A !== A &amp;&amp; START_PT_A !== B &amp;&amp; START_PT_B !== START_PT_A">randRange(-9, 9)</var>
        <var id="REL">randFromArray([ "&lt;", "&gt;", "&le;", "&ge;" ])</var>
        <var id="INCLUSIVE">REL === "&le;" || REL === "&ge;"</var>
        <var id="LESS_THAN">REL === "&lt;" || REL === "&le;"</var>
    </div>

    <div class="problems">
        <div id="equation_from_line">
            <div class="question">
                <p>Graph the inequality represented by the equation:<br />
                    <code>
                        |x + <var>A</var>| <var>REL</var> <var>B</var>
                    </code>
                </p>

                <div class="graphie">
                    circlesFilled = false;
                    centerFilled = true;
                    var circleRadius = 0.4;
                    var graphBounds = [-10, 10];      
 
                    graph = KhanUtil.currentGraph;
                    graph.init({
                        range: [ graphBounds, [-1, 1] ],
                        scale: 24
                    });
	 		
                    numberLine( graphBounds[0], graphBounds[1], null, graphBounds[0], 0 );
 
                    KhanUtil.addMouseLayer();
                    graph.pointA = KhanUtil.addMovablePoint({
                        coord: [ START_PT_A, 0 ],
                        snapX: 1,
                        normalStyle: {
                            stroke: KhanUtil.BLUE,
                            fill: KhanUtil.BLUE
                         },
                        constraints: {
                            constrainY: true
                        }
                    });
                    graph.pointB = KhanUtil.addMovablePoint({
                        coord: [ START_PT_B, 0 ],
                        snapX: 1,
                        normalStyle: {
                            stroke: KhanUtil.BLUE,
                            fill: KhanUtil.BLUE
                        },
                        constraints: {
                            constrainY: true
                        }
                    });
                    graph.pointA.onMove = function( x, y ) {
                        graph.pointA.coord = [ x, y ];
                        graph.drawLines();
                    };
                    graph.pointB.onMove = function( x, y ) {
                        graph.pointB.coord = [ x, y ];
                        graph.drawLines();
                    };
 
                    graph.drawLines = function() {
                        //Clear out display
                        var elements = [graph.ptL, graph.ptR, graph.centerLine, graph.leftLine, graph.rightLine];
                        for (var i = 0; i &lt; elements.length; i++) {
                            if (elements[i]) {
                                elements[i].remove();
                            }
                        }
                        var leftX = Math.min(graph.pointA.coord[0], graph.pointB.coord[0]);
                        var rightX = Math.max(graph.pointA.coord[0], graph.pointB.coord[0]);
                 
                        graph.style({ stroke: KhanUtil.BLUE, fill: circlesFilled ? KhanUtil.BLUE : null });
                        graph.ptL = graph.circle( [ leftX, 0 ], circleRadius );
                        graph.ptR = graph.circle( [ rightX, 0 ], circleRadius );
                        if (centerFilled) {
                            graph.style({ stroke: KhanUtil.BLUE, fill: KhanUtil.BLUE, strokeWidth: 3.5, arrows: "" });
                            graph.centerLine = graph.path( [ [ leftX + circleRadius, 0 ], [ rightX - circleRadius, 0 ]  ] );
                        }
                        else {
                            graph.style({ stroke: KhanUtil.BLUE, fill: KhanUtil.BLUE, strokeWidth: 3.5, arrows: "->" });
                            graph.leftLine = graph.path( [ [ leftX - circleRadius, 0 ], [ graphBounds[0], 0 ]  ] );
                            graph.rightLine = graph.path( [ [ rightX + circleRadius, 0 ], [ graphBounds[1], 0 ]  ] );
                        }
                 
                        graph.pointA.toFront();
                        graph.pointB.toFront();
                    };
 
                    graph.drawLines();
                </div>
            </div>
            <form>
                <label>
                    <input name="circleradio" type="radio" value="unfilled" checked onClick="javascript:
                        setCirclesFilled(false);
                    " />
                    Empty circles
                </label>
                <label>
                    <input name="circleradio" type="radio" value="filled" onClick="javascript:
                        setCirclesFilled(true);
                    " />
                    Solid circles
                </label>
                <br />
                <label>
                    <input name="lineradio" type="radio" value="center" checked onClick="javascript:
                        setCenterFilled(true);
                    " />
                    Line between points
                </label>
                <label>
                    <input name="lineradio" type="radio" value="outside" onClick="javascript:
                        setCenterFilled(false);
                    " />
                    Line outside points
                </label>
            </form>


            <div class="solution" data-type="custom">
                <div class="instruction">
                    Drag the two points into the correct position.
                </div>
                <div class="example">graph the inequality</div>
                <div class="example">make sure the line is correctly between or outside the points</div>
                <div class="example">make sure the points are correctly shown as solid or empty</div>
                <div class="guess">
                    [ Math.min(graph.pointA.coord[0], graph.pointB.coord[0]),
                      Math.max(graph.pointA.coord[0], graph.pointB.coord[0]),
                      circlesFilled,
                      centerFilled ]
                </div>
                <div class="validator-function">
                    console.log(guess);
                    var leftX = guess[0],
                        rightX = guess[1],
                        circlesFilled = guess[2],
                        centerFilled = guess[3];
                    correctLeftX = B 

                    console.log((-1 * A) - B, (-1 * A) + B); 
                    console.log(leftX == (-1 * A) - B, rightX == (-1 * A) + B, INCLUSIVE == circlesFilled, LESS_THAN == centerFilled);
                    return leftX == (-1 * A) - B
                        &amp;&amp; rightX == (-1 * A) + B
                        &amp;&amp; INCLUSIVE == circlesFilled
                        &amp;&amp; LESS_THAN == centerFilled;
                </div>
                <div class="show-guess">
                    graph.pointA.setCoord( [guess[0], 0] );
                    graph.pointB.setCoord( [guess[1], 0] );
                    circlesFilled = guess[2];
                    centerFilled = guess[3];
                    $( "input[name=circleradio][value=" + (circlesFilled ? "filled" : "unfilled") +"]" ).attr( "checked", true );
                    $( "input[name=lineradio][value=" + (centerFilled ? "center" : "outside") +"]" ).attr( "checked", true );
                    graph.drawLines();
                </div>
            </div>
        </div>
    </div>
    </div>
</body>
</html>
