<!DOCTYPE html>
<html data-require="math graphie">
<head>
    <title>Square root of non-perfect squares</title>
    <script src="../khan-exercise.js"></script>
</head>
<body>
    <div class="exercise">
        <div class="problems">
            <div id="square">

                <div class="vars">
                    <var id="cx">0</var>
                    <var id="y">1</var>
                    <var id="SQUARE">randRange(2, 10)</var>
                    <var id="NOT_SQUARE">randRangeExclude(2, floor(200 / (SQUARE*SQUARE)), [4, 8, 9, 16, 25, 27, 36, 49])</var>
                    <var id="SQUARE_FACTORS">getPrimeFactorization(SQUARE)</var>
                    <var id="MULTIPLES">$.map(SQUARE_FACTORS, function(x) {return "(" + x + "\\times " + x + ")"; })</var>
                    <var id="ROOTS">$.map(SQUARE_FACTORS, function(x) {return "\\sqrt{" + x + "\\times " + x + "}"; })</var>
                    <var id="NOT_SQUARE_FACTORS">getPrimeFactorization(NOT_SQUARE)</var>
                    <var id="Q">NOT_SQUARE * SQUARE * SQUARE</var>
                    <var id="PRIMES">getPrimeFactorization(Q)</var>
                    <var id="FACTORIZATION">PRIMES.slice(1, PRIMES.length - 1)</var>
                    <var id="curr">Q</var>
                 </div>

                <p class="question"><code>\Large{\sqrt{<var>Q</var>} = \text{?}}</code></p>

                <p class="solution" data-type="radical"><var>Q</var></p>

                <div class="hints">
                    <p><code>\sqrt{<var>Q</var>}</code> is the number that, when multiplied by itself, equals <code><var>Q</var></code>.</p>

                   <p>First break down <code><var>Q</var></code> into its prime factorization and look for pairs of factors.</p>
                    
                    <p>Let's draw a factor tree.</p>
                    <div class="graphie" id="factor-tree">
                        init({
                            range: [[-1, FACTORIZATION.length + 3], [-2 * (FACTORIZATION.length + 1), 1]],
                            scale: [30, 30]
                        });

                        label([cx + 1, y], curr);
                        path([[cx + 1, y - 0.5], [cx, y - 1.5]]);
                        path([[cx + 1, y - 0.5], [cx + 2, y - 1.5]]);
                        y -= 2;
                        cx += 1;

                        curr = curr / PRIMES[0];

                        label([cx - 1, y], PRIMES[0]);
                        circle([cx - 1, y], 0.5);
                        label([cx + 1, y], curr);
                    </div>

                    <div>
                        <div class="graphie" data-each="FACTORIZATION as factor" data-update="factor-tree">
                                path( [ [cx + 1, y - 0.5], [cx, y - 1.5] ] );
                                path( [ [cx + 1, y - 0.5], [cx + 2, y - 1.5] ] );
                                y -= 2;
                                cx += 1;

                                curr = curr / factor;

                                label( [cx - 1, y], factor );
                                circle( [cx - 1, y], 0.5);
                                label( [cx + 1, y], curr );
                        </div>

                        <div class="graphie" data-update="factor-tree">
                            circle( [cx + 1, y], 0.5);
                        </div>
                    </div>

                    <p>So the prime factorization of <code><var>Q</var></code> is <code><var>PRIMES.join( "\\times " )</var></code>.</p>

                    <div>
                        <p>Notice that we can rearrange the factors like so:</p>
                        <p><code><var>Q</var> = <var>PRIMES.join(" \\times ")</var> = 
                            <var>MULTIPLES.join(" \\times ")</var> \times <var>NOT_SQUARE_FACTORS.join("\\times ")</var></code></p>
                    </div>

                    <p>So <code>\sqrt{<var>Q</var>} = 
                        <var>ROOTS.join(" \\times ")</var> \times \sqrt{<var>NOT_SQUARE_FACTORS.join("\\times ")</var>}</code></p>

                    <p data-if="SQUARE_FACTORS.length + NOT_SQUARE_FACTORS.length > 2"><code>\sqrt{<var>Q</var>} =
                        <var>SQUARE_FACTORS.join("\\times ")</var> \times \sqrt{<var>NOT_SQUARE_FACTORS.join("\\times ")</var>}</code></p>

                    <p><code>\sqrt{<var>Q</var>} = <var>SQUARE</var> \sqrt{<var>NOT_SQUARE</var>}</code></p>
                </div>

            </div>
        </div>

    </div>
</body>
</html>
