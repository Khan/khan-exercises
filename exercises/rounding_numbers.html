<!DOCTYPE html>
<html data-require="math graphie">
<head>
	<title>Rounding Numbers</title>
	<script src="../khan-exercise.js"></script>
</head>
<body>
	<div class="exercise">
	<div class="vars">
		<var id="ROUNDINGTYPE">[{pos: -2, str: "hundredth"},
                    {pos: -1, str: "tenth"},
                    {pos: 0, str: "one"},
                    {pos: 1, str: "ten"},
                    {pos: 2, str: "hundred"},
                    {pos: 3, str: "thousand"}
                    ]</var>
		<var id="TYPE">randFromArray(ROUNDINGTYPE)</var>
		<var id="OFFSET">TYPE.pos</var>
		<div data-if="OFFSET <= 0">
			<var id="NUMBER">randRange(10,99)</var>
			<var id="DECIMAL">randRange(100,999)</var>
			<var id="GIVEN">NUMBER+DECIMAL/1000</var>
			<var id="STRING">NUMBER+"."+DECIMAL</var>
			<var id="ONES">STRING.indexOf(".")</var>
		</div>
		<div data-if="OFFSET > 0">
			<var id="NUMBER">randRange(1000,9000)</var>
			<var id="GIVEN">NUMBER</var>
			<var id="STRING">""+NUMBER</var>
			<var id="ONES">STRING.length-1</var>
		</div>
		<var id="FACTOR">OFFSET > 0 ? round(Math.pow(10,OFFSET)) : 1/(round(Math.pow(10,-OFFSET)))</var>
		<var id="ANSWER">round(GIVEN / FACTOR)*FACTOR</var>
		<var id="ROUN">STRING[ONES-OFFSET-(OFFSET == 0 ? 1 : 0)]</var>
		<var id="RIGHT">STRING[ONES-OFFSET+1]</var>

		<!--Graphing stuff-->
		<div data-if="ANSWER<GIVEN">
			<var id="FIRST">ANSWER</var>
			<var id="LAST">ANSWER+FACTOR</var>
		</div>
		<div data-if="ANSWER>GIVEN">
			<var id="FIRST">ANSWER-FACTOR</var>
			<var id="LAST">ANSWER</var>
		</div>
		<var id="LABELS">[FIRST,
FIRST+FACTOR/10,
FIRST+2*FACTOR/10,
FIRST+3*FACTOR/10,
FIRST+4*FACTOR/10,
FIRST+5*FACTOR/10,
FIRST+6*FACTOR/10,
FIRST+7*FACTOR/10,
FIRST+8*FACTOR/10,
FIRST+9*FACTOR/10,
LAST]</var>
		<var id="COLORED">(GIVEN-FIRST)/FACTOR*10</var>
	</div>
	<div class="problems">
		<div>
			<p class="question">Round <var>GIVEN</var> to the nearest <var>TYPE.str</var>.</p>
			<div class="solution" data-type="decimal"><var>ANSWER</var></div>
		</div>
	</div>
	<div class="hints">
		<p>The digit in the <var>TYPE.str</var>s place is <var>ROUN</var>, and the digit to the right is <var>RIGHT</var></p>
		<p data-if="RIGHT>5">Since the digit to the right, (the <var>RIGHT</var>) is greater than 5, we should round up to <var>ANSWER</var></p>
		<p data-else-if="RIGHT==5">As a rule 5 always rounds up.<br /> 0,1,2,3, and 4 round down, and 5,6,7,8, and 9 round up. So the answer is <var>ANSWER</var></p>
		<p data-else>Since the digit to the right, (the <var>RIGHT</var>) is less than 5, we should round down to <var>ANSWER</var></p>
		<div class="graphie">
init({
    range: [[0, 10], [-1, 1]],
    scale: [60, 60]
});

style({
stroke: "#888",
strokeWidth: 2
});

//horizontal line
path( [ [-10, 0], [10, 0] ] );

//vertical lines
for (i=0;i<=11;i++){
path( [ [i, -.1], [i, .1] ] );
}

<div data-each="LABELS as key, value">label([<var>key</var>,0],"<var>value</var>","below");
</div>
label([<var>COLORED</var>,0],"<var>GIVEN</var>","above",{
color: "#0f0"
});

circle([<var>COLORED</var>, 0], .1, {
    fill: "purple",
    opacity: 1
});

						
		</div>
	</div>
	</div>
</body>
</html>
