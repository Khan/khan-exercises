<!DOCTYPE html>
<html data-require="math graphie word-problems">
	<head>
		<title>Multiplying Fractions 1</title>
		<script src="../khan-exercise.js"></script>
		<style type="text/css">
			.centered_cell {
				text-align: center;
			}
			
			.hint_diagram_table_small {
				border: 0px solid black;
				width: 100px;
				height: 100px;
				border-collapse: collapse;
			}
			
			.hint_diagram_table {
				border: 0px solid black;
				width: 200px;
				height: 200px;
				border-collapse: collapse;
			}
			
			.hint_diagram_table_overlay {
				border: 0px solid black;
				width: 200px;
				height: 200px;
				border-collapse: collapse;
				position: absolute;
			}
			
			.hint_diagram_table_overlay_small {
				border: 0px solid black;
				width: 100px;
				height: 100px;
				border-collapse: collapse;
				position: absolute;
			}				
			
			.hint_empty_cell {
				border: 2px solid black;
				background: white;
				opacity:0.5;
			}
			
			.hint_box1_cell {
				border: 2px solid black;
				background: red;
				opacity:0.5;
			}
			
			.hint_box2_cell {
				border: 2px solid black;
				background: blue;
				opacity:0.5;
			}
		</style>
		<script>
			/*
			 * Generates HTML for a table displaying the fraction's visual representation.
			 * @param numerator numerator as INT.
			 * @param denominator as INT.
			 * @param id ID to give this table. (optional)
			 * @param className class name to give this table. (optional)
			 */
			function createVertTable( numerator, denominator, id, className ) {

				var table = jQuery( "<table/>" );				
				if ( id != null ) {
					table.attr( "id", id );
				}

				if( className != null ) {
					table.addClass( className );
				} else {
					table.addClass( "hint_diagram_table_small" );
				}
				
				table.append( "<tbody/>" );
				var tbody = table.find("tbody");
				
				var rowHeight = table.height() / denominator;

				for( i=0; i < denominator - numerator; i++ ) {
					tbody.append( "<tr><td class=\"hint_empty_cell\"/></tr>" ).height(rowHeight);					
				}
				for( i=0; i < numerator; i++ ) {
					tbody.append( "<tr><td class=\"hint_box1_cell\"/></tr>" ).height(rowHeight);
				}	

				return jQuery('<div />').append(table).html();
			}

			/*
			 * Generates HTML for a table displaying the fraction's visual representation.
			 * @param numerator numerator as INT
			 * @param denominator as INT
			 * @param id ID to give this table. (optional)
			 * @param className class name to give this table. (optional)
			 */
			function createHorizTable( numerator, denominator, id, className ) {

				var table = jQuery( "<table/>" );
				if ( id != null ) {
					table.attr( "id", id );
				}

				if( className != null ) {
					table.addClass( className );
				} else {
					table.addClass( "hint_diagram_table_small" );
				}
				
				table.addClass( "hint_diagram_table_small" );
				table.append( "<tbody/>" );
				var tbody = table.find("tbody");
				tbody.append( "<tr/>" );
				var row = tbody.find( "tr" );
				row.height( table.height() );
				
				var colWidth = row.width() / denominator;
				
				for( i=0; i < denominator - numerator; i++ ) {
					row.append("<td class=\"hint_empty_cell\"/>").width(colWidth);
				}
				for( i=0; i < numerator; i++ ) {
					row.append("<td class=\"hint_box2_cell\"/>").width(colWidth);
				}

				return jQuery('<div />').append(table).html();
			}

			/*
			 * Creates N number of boxes.
			 * @param number number of boxes as INT.
			 */
			function createNBoxes(number) {
				
				var tablesSrc = "";
				for ( var i = 0; i < number; i++ ) {
					tablesSrc += createHorizTable( 1, 1, null, null );
				}
				return tablesSrc;
			}

		</script>
	</head>
	<body>
		<div class="exercise">
			<div class="problems">

				<div id="fraction-with-fraction">
					<div class="vars" data-ensure="A_DENOMINATOR != B_DENOMINATOR">
						<var id="A_NUMERATOR">randRange(1, 4)</var>
						<var id="A_DENOMINATOR">A_NUMERATOR + randRange(1, 4)</var>
						<var id="B_NUMERATOR">randRange(1, 4)</var>
						<var id="B_DENOMINATOR">B_NUMERATOR + randRange(1, 4)</var>
						<var id="UNSIMPLIFIED_ANSWER">
							( A_NUMERATOR * B_NUMERATOR ).toString() + "/" + 
							( A_DENOMINATOR * B_DENOMINATOR ).toString()
						</var>
						<var id="GCD">
							KhanUtil.getGCD( ( A_NUMERATOR * B_NUMERATOR ), 
								( A_DENOMINATOR * B_DENOMINATOR ))
						</var>
						<var id="TABLE_A">
							createVertTable( A_NUMERATOR, A_DENOMINATOR, null, null )
						</var>
						<var id="TABLE_B">
							createHorizTable( B_NUMERATOR, B_DENOMINATOR, null, null )
						</var>
						<var id="TABLE_A_HINT">
							createVertTable( A_NUMERATOR, A_DENOMINATOR, 'box1', 
								'hint_diagram_table_overlay' )
						</var>
						<var id="TABLE_B_HINT">
							createHorizTable( B_NUMERATOR, B_DENOMINATOR, 'box2', 
								'hint_diagram_table_overlay' )
						</var>
					</div>

					<div class="question">
						<p class="question_text">What is
							<table>
								<tbody>
									<tr>
										<td class="centered_cell">
											<code>
												\huge{\frac{<var>A_NUMERATOR</var>}
												{<var>A_DENOMINATOR</var>}}
											</code>
										</td>
										<td class="centered_cell">
											<code>\huge{\times}</code>
										</td>
										<td class="centered_cell">
											<code>
												\huge{\frac{<var>B_NUMERATOR</var>}
												{<var>B_DENOMINATOR</var>}}
											</code>
										</td>
										<td class="centered_cell">
											<code>\huge{ = ?}</code>
										</td>
									</tr>
									<tr>
										<td>
											<var>TABLE_A</var>
										</td>
										<td></td>
										<td>
											<var>TABLE_B</var>	
										</td>
										<td></td>
									</tr>
								</tbody>
							</table>
						</p>
					</div>
					<div class="solution" data-type="rational" data-simplify="optional">
						<var>
							( A_NUMERATOR * B_NUMERATOR ) / ( A_DENOMINATOR * B_DENOMINATOR )
						</var>
					</div>
					
					<div class="hints">
						<div id="problem1-hint1-div">
							<p>
								Another way to word this problem is:
							</p>
							<p>
								What is 
								<code>
									\frac{<var>A_NUMERATOR</var>}{<var>A_DENOMINATOR</var>}
								</code> 
								of 
								<code>
									\frac{<var>B_NUMERATOR</var>}{<var>B_DENOMINATOR</var>}
								</code>?
							</p>
						</div> <!-- End of hint 1 -->

						<div id="problem1-hint2-div">
							<p>
							Notice the number of boxes in the grid equal to 
								<var>A_DENOMINATOR * B_DENOMINATOR</var> 
								(<code>
									<var>A_DENOMINATOR</var> \times <var>B_DENOMINATOR</var>
								</code>)
								and the number of boxes where the 2 intersect is equal to 
								<code><var>A_NUMERATOR * B_NUMERATOR</var></code> 
								(<code>
									<var>A_NUMERATOR</var> \times <var>B_NUMERATOR</var>
								</code>).  
								So our unsimplified answer is: 
								<code>
									\frac{<var>A_NUMERATOR * B_NUMERATOR</var>}
									{<var>A_DENOMINATOR * B_DENOMINATOR</var>}
								</code>.
							</p>
							<div id="problem1-hint2-box-p" 
								style="display: block; position: relative; height:220px;">

								<var>TABLE_A_HINT</var>
								<var>TABLE_B_HINT</var>

								<script type="text/javascript">
									$(document).ready(function(){
										// animate the right box overlaying over the left one.
										$("#box2").css("left", 300);
										$("#box2").animate({left: "0"}, 5000);
									});
								</script>
							</div>
						</div>	<!-- End of hint 2 div -->	

						<div id="problem1-hint3-div" data-if="GCD > 1">
							This can be further simplified to
							<code>
								\frac{<var>A_NUMERATOR * B_NUMERATOR / GCD</var>}
								{<var>A_DENOMINATOR * B_DENOMINATOR / GCD</var>}
							</code>, 
							by dividing both top and bottom by it's common denominator 
							<var>GCD</var>.
						</div>
					</div><!-- End of Hints -->
				</div><!-- End of problem 1 -->

				<div id="fraction-with-whole-number">
					<div class="vars">
						<var id="A_NUMERATOR">randRange(1, 4)</var>
						<var id="A_DENOMINATOR">A_NUMERATOR + randRange(1, 4)</var>
						<var id="B_NUMBER">randRange(1, 4)</var>

						<var id="UNSIMPLIFIED_ANSWER">
							( A_NUMERATOR * B_NUMBER ).toString() + "/" + 
							( A_DENOMINATOR ).toString()
						</var>
						<var id="GCD">
							KhanUtil.getGCD( ( A_NUMERATOR * B_NUMBER ), ( A_DENOMINATOR ) )
						</var>
						<var id="TABLE_A">
							createVertTable( A_NUMERATOR, A_DENOMINATOR, null, null )
						</var>
						<var id="TABLES_B">
							createNBoxes( B_NUMBER )
						</var>
					</div>

					<div class="question">
						<p class="question_text">What is
							<table>
								<tbody>
									<tr>
										<td class="centered_cell">
											<code>
												\huge{\frac{<var>A_NUMERATOR</var>}
												{<var>A_DENOMINATOR</var>}}
											</code>
										</td>
										<td class="centered_cell">
											<code>\huge{\times}</code>
										</td>
										<td class="centered_cell">
											<code>
												\huge{<var>B_NUMBER</var>}
											</code>	
										</td>
										<td class="centered_cell">
											<code>\huge{ = ?}</code>
										</td>
									</tr>
									<tr>
										<td>
											<var>TABLE_A</var>
										</td>
										<td></td>
										<td>
											<var>TABLES_B</var>	
										</td>
										<td></td>
									</tr>
								</tbody>
							</table>
						</p>
					</div>

					<div class="solution" data-type="rational" data-simplify="optional">
						<var>
							( A_NUMERATOR * B_NUMBER ) / ( A_DENOMINATOR )
						</var>
					</div>
				</div><!-- End of problem 2 -->


			</div><!-- End of Problems -->
		</div><!-- End of Exercises -->
	</body>
</html>