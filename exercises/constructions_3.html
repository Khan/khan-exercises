<!DOCTYPE html>
<html data-require="math graphie graphie-geometry interactive constructions">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Compass Constructions 3</title>
    <script src="../khan-exercise.js"></script>
    <script>
        var applyRefFrame = function(coord, rot) {
            var rotCoord = [];
            rotCoord[0] = Math.cos(rot) * coord[0] - Math.sin(rot) * coord[1];
            rotCoord[1] = Math.sin(rot) * coord[0] + Math.cos(rot) * coord[1];

            return rotCoord;
        };
    </script>
</head>
<body>
    <div class="exercise">
        <div class="vars">
            <var id="ANGLE1">randRange(40, 80)</var>
            <var id="ANGLE2">randRange((180 - ANGLE1) / 2 - 20, (180 - ANGLE1) / 2 + 20)</var>
            <var id="ANGLE3">180 - ANGLE1 - ANGLE2</var>
        </div>

    <div class="problems">
        <div id="inscribed">
            <div class="problem">
                <form>
                    <input onclick="javascript: KhanUtil.construction.addCompass();" type="button" value="Add Compass">
                    <input onclick="javascript: KhanUtil.construction.addStraightedge(false);" type="button" value="Add Straightedge">
                    <input onclick="javascript: KhanUtil.construction.removeAllTools();" type="button" value="Clear">
                </form>
                <p class="question">
                    Construct a circle inscribed inside the triangle.
                </p>
                <div class="graphie" id="construction">
                    init({
                        range: [[-5, 5], [-4, 4]],
                        scale: 50
                    });
                    addMouseLayer();
                    addConstruction("construction");

                    var triangle = new Triangle([0, 0], [ANGLE1, ANGLE2, ANGLE3], 12, {});
                    var circumCenter = triangle.circumCenter;
                    triangle.rotate(randRange(0, 360));
                    triangle.translate([-circumCenter[0], -circumCenter[1]]);
                    triangle.draw();

                    construction.inCenter = triangle.inCenter;
                    construction.inRadius = triangle.findInRadius();
                    addDummyPoint(construction.inCenter);
                </div>
            </div>

            <div class="solution" data-type="custom">
                <div class="instruction">Use the compass and straightedge tools to construct an equilateral triangle.</div>
                <div class="guess">getToolProperties(construction)</div>
                <div class="validator-function">
                    if (guess.length === 0) {
                        return "";
                    }

                    // Find incircle
                    var inCircle = findCompass(guess, {
                        radius: construction.inRadius,
                        cx: construction.inCenter[0],
                        cy: construction.inCenter[1]
                    });

                    if (inCircle.length &lt; 1) {
                        return false;
                    } else {
                        return true;
                    }

                    return "Make sure you keep the compasses you used in place."
                </div>
                <div class="show-guess">
                    showConstructionGuess(guess);
                </div>
            </div>

            <div class="hints">
                <div>
                    <p>A inscribed circle is centered on the incenter of a triangle.</p>
                    <p>The incenter of a triangle is the intersection of its angle bisectors.</p>

                    <div class="graphie" data-update="construction">
                        graph.dx = SIZE * cos(PI / 6);
                        graph.dy = SIZE * sin(PI / 6);

                        graph.hintLines = raphael.set();
                        graph.hintLines.push(drawHintLine([0, SIZE], [graph.dx, -graph.dy], 1));
                        graph.hintLines.push(drawHintLine([0, SIZE], [-graph.dx, -graph.dy], 1));
                        graph.hintLines.push(drawHintLine([-graph.dx, -graph.dy], [graph.dx, -graph.dy], 1));
                    </div>
                    <p>
                        We could just <em>try</em> to draw a triangle inside the circle, but then
                        <strong>we have no guarantee </strong> that all the sides would be the
                        same length and all the angles would be the same size.
                    </p>
                </div>

                <div>
                    <div class="graphie" data-update="construction">
                        graph.hintLines.push(drawHintLine([0, 0], [0, SIZE], 2)).toBack();
                        graph.hintLines.push(drawHintLine([0, 0], [-graph.dx, -graph.dy], 2)).toBack();
                        graph.hintLines.push(drawHintLine([0, 0], [graph.dx, -graph.dy], 2)).toBack();

                        graph.hintLines.push(arc([0, 0], 0.3, 210, 330, 0, {
                            stroke: BLUE,
                            strokeWidth: 1
                        }));
                    </div>
                    <p>
                        The points of an equilateral triangle are equally spaced around the center.
                        Therefore, each point is <code>120^{\circ}</code> from each other point.
                    </p>
                </div>

                <div>
                    <div class="graphie" data-update="construction">
                        graph.hintLines.remove();

                        line([0, SIZE], [0, -SIZE], {
                            strokeWidth: 2,
                            stroke: GRAY
                        }).toBack();

                        circle([0, SIZE], 0.08, {
                            fill: GRAY,
                            stroke: null
                        })
                        circle([0, -SIZE], 0.08, {
                            fill: GRAY,
                            stroke: null
                        })

                        circle([0, -SIZE], SIZE, {
                            stroke: GRAY,
                            strokeWidth: 1,
                            fill: "none",
                            strokeDasharray: "- "
                        }).toBack();

                    </div>
                    <p>
                        Draw a line through the center of the circle and center a compass with the same
                        radius as the original circle at one point.
                    </p>
                </div>

                <div>
                    <div class="graphie" data-update="construction">
                        graph.hintLines = raphael.set();
                        graph.hintLines.push(drawHintLine([0, 0], [0, -SIZE], 3));
                        graph.hintLines.push(drawHintLine([0, 0], [graph.dx, -graph.dy], 3));
                        graph.hintLines.push(drawHintLine([0, -SIZE], [graph.dx, -graph.dy], 3));

                        graph.hintLines.push(arc([0, 0], 0.3, -90, -30, 0, {
                            stroke: BLUE,
                            strokeWidth: 1
                        }));
                    </div>
                    <p>
                        The distance between the centers of the two compasses is equal to the 
                        radius of each compass. The distance between the center of a compass and
                        every point on the compass circumference is also equal to the compass radius.
                        Therefore the points where the two compasses intersect is one radius from
                        the center of each compass.
                    </p>
                    <p>
                        Joining one point where the compasses intersect with the centers of
                        the two compasses forms an equilateral triangle. The interior angles of
                        an equilateral triangle are <code>60^{\circ}</code>.
                    </p>
                </div>

                <div>
                    <div class="graphie" data-update="construction">
                        graph.hintLines.remove();

                        line([0, SIZE], [graph.dx, -graph.dy], {
                            strokeWidth: 2,
                            stroke: GRAY
                        }).toBack();

                        line([0, SIZE], [-graph.dx, -graph.dy], {
                            strokeWidth: 2,
                            stroke: GRAY
                        }).toBack();

                        line([graph.dx, -graph.dy], [-graph.dx, -graph.dy], {
                            strokeWidth: 2,
                            stroke: GRAY
                        }).toBack();

                        circle([graph.dx, -graph.dy], 0.08, {
                            fill: GRAY,
                            stroke: null
                        })
                        circle([-graph.dx, -graph.dy], 0.08, {
                            fill: GRAY,
                            stroke: null
                        })
                    </div>
                    <p>
                        Therefore, the two points where the compasses intersect are <code>120^{\circ}</code>
                        apart, and <code>120^{\circ}</code> from the opposite end of the diameter.
                        Joining these points therefore forms an equilateral triangle.
                    </p>
                </div>
            </div>
        </div>

    </div>
    </div>
</body>
</html>
