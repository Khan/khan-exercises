<!DOCTYPE html>
<html data-require="math math-format polynomials functional">
<head>
	<meta charset="UTF-8" />
	<title>Integrating polynomials</title>
	<script src="../khan-exercise.js"></script>
	<script type="text/javascript">
		function getFakeAnswers( solution ) {
			var answers = [];
			for ( var i = 0; i < 4; i++ ) {
				var coefs = []; 

				for ( var j = 0; j < solution.getNumberOfTerms(); j++ ) {
					var term = solution.getCoefAndDegreeForTerm( j );

					if ( i === j ) {
						coefs[ term.degree ] = KhanUtil.randRangeNonZero( -7, 7 );
					} else {
						coefs[ term.degree ] = term.coef; 
					}
				}
				
				for ( var j = 0; j < coefs.length; j++ ) {
					if ( coefs[ j ] === undefined ) {
						coefs[ j ] = 0;
					}
				} 
                                if(KhanUtil.random() < KhanUtil.random()){
                                         coefs = coefs.reverse();
                                }
                                if(KhanUtil.random() < KhanUtil.random()){
                                         coefs = coefs.slice(1);
                                }                                                      
				answers.push( new KhanUtil.Polynomial(0, solution.maxDegree, coefs, solution.variable) );
			}

			return answers;
		}
	</script>
</head>
<body>
	<div class="exercise">
		<div class="vars">
			<var id="X">"x"</var>
			<var id="COLORS">[ BLUE, ORANGE, GREEN, PINK]</var>
			<var id="MAX_DEGREE">10</var>
                        <var id="MIN_DEGREE">0</var>
			<var id="NON_ZERO_INDICES">randRangeUniqueNonZero( 0, MAX_DEGREE, randRange(2,4) ).sort().reverse()</var>
			<var id="POL_1">
                          (function (){
				var coefs = [];
				for ( var i = 0; i < MAX_DEGREE; i++ ) {
					var value = 0;
					for ( var j = 0; j < NON_ZERO_INDICES.length; j++ ) {
						if ( i === NON_ZERO_INDICES[ j ] ) {
							value = randRangeNonZero( -7, 7 )*(i+1);
							break;
						} 
					}
					coefs[ i ] = value;
				}
				return new Polynomial( 0, MAX_DEGREE, coefs, X );
			})()</var>
		</div>
		<div class="problems">
			<div id="integrate">
				<div class="vars">
					<var id="SOLUTION">integratePolynomial(POL_1)</var>	
					<var id="FAKE_ANSWERS">getFakeAnswers(SOLUTION)</var>
				</div>
				<p class="question">Compute the integral.</p>
				<p class="problem">
                                  <code>
                                    \int <var>POL_1</var>d <var>X</var>
                                  </code>
                                </p>
				<p class="solution"><code><var>SOLUTION</var>+c</code></p>
				<ul class="choices" data-none="true">
				  <li data-each="FAKE_ANSWERS as FAKE_ANSWER"><code><var>FAKE_ANSWER</var>+c</code></li>
				</ul>
			</div>
		</div>
                <div class="hints">
		  <div id="paren">
		    <p>Since integration is linear,  the integral can be split into smaller integrals.</p>
		    <p>
                      <div class ="vars">
                        <var id="TERMS">POL_1.getTermMap()</var>
                        <var id="FIRST_TERMS">TERMS.slice(0,TERMS.length-1)</var>
                        <var id="LAST_TERM">TERMS[TERMS.length-1]</var>
                      </div>
                      <code>
                        <span data-each="FIRST_TERMS as TERM">                  
                          \color{<var>COLORS[TERMS.indexOf(TERM)]</var>}{\int<var>TERM.coef</var><var>X</var>^{<var>TERM.degree</var>}dx}+
                        </span>
                        \color{<var>COLORS[TERMS.indexOf(LAST_TERM)]</var>}{\int <var>LAST_TERM.coef</var><var>X</var>^{<var>LAST_TERM.degree</var>}dx}
                    </code></p>
		  </div>
		  <div>
		    <p>Next, bring the coefficients outside of the integrals.</p>
                    <code>
                        <span data-each="FIRST_TERMS as TERM">                  
                          \color{<var>GREEN</var>}{<var>TERM.coef</var>} \color{<var>BLUE</var>}{\int <var>X</var>^{<var>TERM.degree</var>}dx}+
                        </span>
                        \color{<var>GREEN</var>}{<var>LAST_TERM.coef</var>} \color{<var>BLUE</var>}{\int <var>X</var>^{<var>LAST_TERM.degree</var>}dx}
                      </code>
                  </div>
		  <div>
		    <p>Apply the idea that when  <code> p \ge 1,\int x^p dx = \frac{x^{p+1}}{p+1}+c</code>. </p>
                    <code>
                        <span data-each="FIRST_TERMS as TERM">                  
                          \color{<var>GREEN</var>}{<var>TERM.coef</var>} (\color{<var>BLUE</var>}{\frac{<var>X</var>^{<var>TERM.degree+1</var>}}{<var> TERM.degree+1 </var>}+c_{<var>TERMS.indexOf(TERM)</var>}})+
                        </span>
                        \color{<var>GREEN</var>}{<var>LAST_TERM.coef</var>}(\color{<var>BLUE</var>}{\frac{<var>X</var>^{<var>LAST_TERM.degree+1</var>}}{<var> LAST_TERM.degree+1 </var>}+c_{<var>TERMS.indexOf(LAST_TERM)</var>}})

		    </code>
		  </div>
		  <div>
		    <div>
		      <p>Simplify the solution.</p>
		      <p><code><var>SOLUTION.text()</var>+c</code></p>
		      <p>You're done!</p>
		    </div>
		  </div>
	</div>
</body>
</html>
