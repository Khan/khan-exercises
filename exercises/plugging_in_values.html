<!DOCTYPE html>
<html data-require="math">
<head>
	<meta charset="UTF-8" />
	<title>Plugging in X and Y Values</title>
	<script src="../khan-exercise.js"></script>
	<style type="text/css">
		table.plug_in {
			border: 3px solid black;
		}
		table.plug_in td, table.plug_in th {
			border: 2px solid black;
			padding-top: 5px;
			padding-bottom: 5px;
			padding-left: 20px;
			padding-right: 20px;
		}
		table.plug_hint td {
			padding-left: 40px;
		}
	</style>
	<script type="text/javascript">
		// Returns an array of length count of elements produced by
		// the generate function, all of whom match the given predicate
		function takeNMatching(count, generator, predicate) {
			var toReturn = [];
			while (toReturn.length < count) {
				var val = generator();
				if (predicate(val)) {
					toReturn.push(val);
				}
			}
			return toReturn;
		}
		
		function cardinal(n) {
			return {
				1: "first",
				2: "second",
				3: "third",
				4: "fourth"
			}[n]
		}
	</script>
</head>
<body>
<div class="exercise">
	
	<div class="vars">
		<var id="COEF">randRange( 2, 5 )</var>
		<var id="CONST">randRange( 1, 10 )</var>
		<var id="XVALS">randRangeUnique( 1, 9, 4 )</var>
		<var id="COUNTEREXAMPLES">
			[]
		</var>
		<var id="WRONG_ANSWERS">
			takeNMatching(3, 
			  function generateCandidates() {
					return {
						coef: randRange( 1, 5 ),
						const: randRange(0, 1) > 0 ? randRange( 1, 10 ) : randRange(-1, -10)
					}
				}, 
				function acceptIncorrectAnswers(candidate_answer) {
					for (var i = 0; i &lt; XVALS.length; i++) {
						var correct = COEF * XVALS[i] + CONST;
						var candidate_result = candidate_answer.coef * XVALS[i] + candidate_answer.const;
						//if this candidate disagrees with the correct answer in at least one visible place
						//then we accept it
						if (correct != candidate_result) {
							COUNTEREXAMPLES.push(i);
							return true;
						}
					}
					//if it produces identical values for all of the given table entries then it is rejected
					return false;
				}
			)
		</var>
	</div>

	<div class="problems">
		<div id="ordered-pairs">
			<div class="vars">
				<var id="X_NAME">"x"</var>
				<var id="Y_NAME">"y"</var>
			</div>
			<div class="question">
				<p>Some ordered pairs for a linear function of x are given in the table below.</p>
				<table class="plug_in">
					<thead>
						<tr><th><code class="hint_orange">x</code></th><th><code class="hint_blue">y</code></th></tr>
					</thead>
					<tbody>
						<tr data-each="XVALS as xval">
							<td><var>xval</var></td><td><var>COEF * xval + CONST</var></td>
						</tr>
					</tbody>
				</table>
				<p>Which of the following equations was used to generate the table above?</p>
			</div>
		</div>
		<div id="chicken-per-pound">
			<div class="vars">
				<var id="X_NAME">"p"</var>
				<var id="Y_NAME">"c"</var>
			</div>
			<div class="question">
				<p>
					The data in the table show the cost of buying pieces of chicken per pound,
					including the fee for the butcher to cut the chicken up.
				</p>
				<table class="plug_in">
					<thead>
						<tr><th>Pound <code class="hint_orange">(p)</code></th><th>Cost <code class="hint_blue">(c)</code></th></tr>
					</thead>
					<tbody>
						<tr data-each="XVALS as xval">
							<td><var>xval</var></td><td><var>COEF * xval + CONST</var></td>
						</tr>
					</tbody>
				</table>
				<p>What equation fits the data?</p>
			</div>
		</div>
		<div id="which-equation">
			<div class="vars">
				<var id="X_NAME">"X"</var>
				<var id="Y_NAME">"Y"</var>
			</div>
			<div class="question">
				<p>
					Which of the equations below was used to solve for <code>Y</code> in the following
					table?
				</p>
				<table class="plug_in">
					<thead>
						<tr><th><code class="hint_orange">X</code></th><th><code class="hint_blue">Y</code></th></tr>
					</thead>
					<tbody>
						<tr data-each="XVALS as xval">
							<td><var>xval</var></td><td><var>COEF * xval + CONST</var></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div class="solution"><code><var>Y_NAME</var> = <var>COEF</var><var>X_NAME</var> + <var>CONST</var></code></div>
	<ul class="choices">
		<li data-each="WRONG_ANSWERS as answer">
			<code><var>Y_NAME</var> = <var>answer.coef</var><var>X_NAME</var> + <var>answer.const</var></code>
		</li>
	</ul>


	<div class="hints">
		<div>
			Try one of the answers and substituting the values for <code class="hint_orange"><var>X_NAME</var></code>
			and <code class="hint_blue"><var>Y_NAME</var></code> from the table. If the equality doesn't hold, then
			that equation doesn't work with this table.
		</div>
		<div>
			<p>
				For example, take <code class="hint_blue"><var>Y_NAME</var></code><code></span> = <var>WRONG_ANSWERS[0].coef</var></code><code class="hint_orange"><var>X_NAME</var></code> + <var>WRONG_ANSWERS[0].const</var></code>.
				Substituting <code class="hint_orange"><var>X_NAME</var></code> and <code class="hint_blue"><var>Y_NAME</var></code>
				for the values in the <var>cardinal(COUNTEREXAMPLES[0] + 2)</var> row of the table, we get the equality:
			</p>
			<p>
				<code class="hint_blue"><var>COEF * XVALS[COUNTEREXAMPLES[0]] + CONST</var></code>
				<code> = <var>WRONG_ANSWERS[0].coef</var> * </code>
				<code class="hint_orange"><var>XVALS[COUNTEREXAMPLES[0]]</var></code><code> + <var>WRONG_ANSWERS[0].const</var></code>
			</p>
		</div>
		<div>
			<p>
				Which reduces to:
			</p>
			<p>
				<code class="hint_blue"><var>COEF * XVALS[COUNTEREXAMPLES[0]] + CONST</var></code> =
					<var>WRONG_ANSWERS[0].coef * XVALS[COUNTEREXAMPLES[0]] + WRONG_ANSWERS[0].const</var>
				</code> <span style="color: red;">❎</span>
			</p>
			Which isn't true, so we can eliminate 
			<code class="hint_blue"><var>Y_NAME</var></code><code></span> = <var>COEF</var></code><code class="hint_orange"><var>X_NAME</var></code> + <var>CONST</var></code>,
			because it doesn't work for the <var>cardinal(COUNTEREXAMPLES[0] + 2)</var> row of the table.
		</div>
		<div>
			We can continue to try each of the equations to see if they work with the values in the table.
		</div>
		<div>
			When we try
			<code class="hint_blue"><var>Y_NAME</var></code><code></span> = <var>COEF</var></code><code class="hint_orange"><var>X_NAME</var></code> + <var>CONST</var></code> we can see that it holds for each of the rows of the table:
			<table class='plug_hint'>
				<tr data-each="XVALS as xval">
					<td>
						<code class="hint_blue"><var>COEF * xval + CONST</var></code><code> = <var>COEF</var> * 
						</code><code class="hint_orange"><var>xval</var></code><code> + <var>CONST</var></code>
					</td>
					<td>&rarr;</td>
					<td>
						<code class="hint_blue"><var>COEF * xval + CONST</var></code><code> = 
						<var>COEF * xval + CONST</var></code> <span style="color: green;">✓</span>
					</td>
				</tr>
			</table>
		</div>
	</div>
</div>
</body>
</html>
