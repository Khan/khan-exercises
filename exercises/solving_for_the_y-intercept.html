<!DOCTYPE html>
<html data-require="math graph graphie math-format">
<head>
    <title>Solving for the Y-Intercept</title>
    <script src="../khan-exercise.js"></script>

    <script type="text/javascript">
        function p1Position( x1, y1, x2, y2 ) {
            if ( ( y1 > y2 ) && ( x1 > x2 ) ) {
                return "above right";
            } else if ( ( y1 > y2 ) && ( x1 < x2 ) ) {
                return "above left";
            } else if ( ( y1 < y2 ) && ( x1 < x2 ) ) {
                return "below left";
            } else {
                return "below right";
            }
        }

        function p2Position( x1, y1, x2, y2 ) {
            if ( ( y1 > y2 ) && ( x1 > x2 ) ) {
                return "below left";
            } else if ( ( y1 > y2 ) && ( x1 < x2 ) ) {
                return "below right";
            } else if ( ( y1 < y2 ) && ( x1 < x2 ) ) {
                return "above right";
            } else {
                return "above left";
            }            
        }
    </script>
</head>
<body>
    <div class="exercise">
        <div class="vars" data-ensure="X2 !== X1 && Y2 !== Y1 && X_MAX >= 0 && X_MIN <= 0 && Y_MAX >= 0 && Y_MIN <= 0">
            <var id="X1">randRangeNonZero(-10, 10)</var>
            <var id="X2">randRangeNonZero(-10, 10)</var>
            <var id="Y1">randRangeNonZero(-10, 10)</var>
            <var id="Y2">randRangeNonZero(-10, 10)</var>

            <var id="X_MARGIN">abs(X1 - X2)/2</var>
            <var id="Y_MARGIN">abs(Y1 - Y2)/2</var>

            <var id="X_MAX">max(X1, X2) + X_MARGIN</var>
            <var id="X_MIN">min(X1, X2) - X_MARGIN</var>
            <var id="Y_MAX">max(Y1, Y2) + Y_MARGIN</var>
            <var id="Y_MIN">min(Y1, Y2) - Y_MARGIN</var>

            <var id="SLOPE_NUMERATOR">Y1 - Y2</var>
            <var id="SLOPE_DENOMINATOR">X1 - X2</var>

            <var id="M">SLOPE_NUMERATOR / SLOPE_DENOMINATOR</var>
            <var id="B">Y1 - (X1 * M)</var>
        </div>

        <div class="problems">
            <div>
                <div class="problem">
                    <p>The equation of a line that passes through the point <code>(<var>X1</var>, <var>Y1</var>)</code> is:</p>
                    <p><code>y = <var>fractionReduce( SLOPE_NUMERATOR, SLOPE_DENOMINATOR )</var> x + b</code></p>
                </div>
                <p class="question">What is the <code>y</code>-intercept <code>b</code>?</p>

                <p class="solution" data-type="rational"><var>(Y1 * SLOPE_DENOMINATOR - X1 * SLOPE_NUMERATOR) / SLOPE_DENOMINATOR</var></p>
            </div>
        </div>

        <div class="hints">
            <div>
                <p>Substituting <code>(<var>X1</var>, <var>Y1</var>)</code> into the equation gives:</p>
                <p><code><var>Y1</var> = <var>fractionReduce( SLOPE_NUMERATOR, SLOPE_DENOMINATOR )</var> \cdot <var>X1</var> + b</code></p>
                <p><code><var>Y1</var> = <var>fractionReduce( X1*SLOPE_NUMERATOR , SLOPE_DENOMINATOR )</var> + b</code></p>
                <p><code>b = <var>fractionReduce( Y1 * SLOPE_DENOMINATOR - X1 * SLOPE_NUMERATOR, SLOPE_DENOMINATOR )</var></code></p>
                <p><code>y = <var>fractionReduce( SLOPE_NUMERATOR, SLOPE_DENOMINATOR )</var> x + <var>fractionReduce(Y1*SLOPE_DENOMINATOR-X1*SLOPE_NUMERATOR,SLOPE_DENOMINATOR)</var></code></p>

                <div class="graphie" id="problem1-graph">
                    var xScale = 300 / ( X_MAX - X_MIN );
                    var yScale = 300 / ( Y_MAX - Y_MIN );
                    var ptSize = 4 / yScale;
                    init({
                        range: [[X_MIN, X_MAX], [Y_MIN, Y_MAX]],
                        scale: [ xScale, yScale ]
                    });

                    style({
                        stroke: "red",
                        strokeWidth: 1
                    });

                    style( { stroke: "grey" }, 
                        function() {
                            //draw axis
                            path([ [X_MIN, 0], [X_MAX, 0] ] );
                            path([ [0, Y_MIN], [0,Y_MAX]]);
                            
                            //draw tick marks
                            for(var i = X_MIN+1; i < X_MAX; i++) {
                                path( [ [i, -0.15], [i, 0.15] ], {strokeWidth: 0.5});
                            }
                            for(var i = Y_MIN+1; i < Y_MAX; i++) {
                                path( [ [-0.15, i], [0.15, i] ], {strokeWidth: 0.5});
                            }
                        });

                    plot(function( x ) {
                        return M * x + B;
                    }, [X_MIN, X_MAX], {
                        stroke: "red"
                    });

                    // Draw points.  (scaled by y-axis size)
                    ellipse( [X1, Y1], [ptSize * yScale/xScale, ptSize],
                        {stroke: "black", fill: "yellow"});
                    label([ X1, Y1], "(" + X1 + ", " + Y1 + ")", p1Position(X1, Y1, X2, Y2) );
                    ellipse( [X2, Y2], [ptSize * yScale/xScale, ptSize],
                        {stroke: "black", fill: "yellow"});
                    label([ X2, Y2], "(" + X2 + ", " + Y2 + ")", p2Position(X1, Y1, X2, Y2) );
                </div>

            </div>
        </div>
    </div>
</body>
</html>
