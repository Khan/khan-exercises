  <!DOCTYPE html>
    <html data-require="math math-format expressions interactive graphie">
    <head>
      <title>Graphs of Exponential and Logarithmic Functions</title>
      <script src="../khan-exercise.js"></script>
    </head>
    <body>
      <div class="exercise">
        <div class="vars">
          <var id="K">randRangeNonZero(1, 5)</var>
          <var id="L">randRangeNonZero(2, 3)</var>
        </div>

        <div class="problems">
          <div id="problem-type-or-description">
            <p class="question">
              Graph the function <code><var>K</var>*<var>L</var>^x</code>
            </p>
            <p class="problem">
              <br />
              <div class="graphie" id="grid">

                graphInit({
                  range: [[-6, 6], [-1, 11]],
                  scale: 30,
                  axisArrows: "&lt;-&gt;",
                  tickStep: 1,
                  labelStep: 1,
                  gridOpacity: 0.05,
                  axisOpacity: 0.2,
                  tickOpacity: 0.4,
                  labelOpacity: 0.5
                });

                label([0, 11], "y", "above");
                label([6 , 0], "x", "right");

                addMouseLayer();

                graph.pointA = addMovablePoint({
                  coord: [1, 1],
                  snapX: 0.5,
                  snapY: 0.5,
                  normalStyle: {
                    stroke: KhanUtil.BLUE,
                    fill: KhanUtil.BLUE
                  }
                });

                graph.pointB = addMovablePoint({
                  coord: [2, 2],
                  snapX: 0.5,
                  snapY: 0.5,
                  normalStyle: {
                    stroke: KhanUtil.BLUE,
                    fill: KhanUtil.BLUE
                  }
                });
                
                graph.pointA.onMove = function(x, y) {
                  graph.pointA.coord = [x, y];
                  graph.drawExpo();
                };
                graph.pointB.onMove = function(x, y) {
                  graph.pointB.coord = [x, y];
                  graph.drawExpo();
                };
           
                graph.FitExpo = function (p1,p2){

                  if(abs(p2[0]-p1[0]) > 0.0001){
                    var expo = 1/(p2[0]-p1[0]);
                    var value = p2[1]/p1[1];
                    var B = pow(value,expo);
                    var denom=pow(B,p1[0]);
                    var A = p1[1]/denom;
                    return [A,B];
                  }else{
                    return [0,0];
                  }
                };
                
                graph.expo = bogusShape;

                graph.drawExpo = function() {
                  graph.expo.remove();
                  var coeffs = graph.FitExpo(graph.pointA.coord,graph.pointB.coord);
                  style({
                    stroke: KhanUtil.BLUE
                  }, function() {
                    graph.expo = plot( function(x) {
                      return coeffs[0] * (pow(coeffs[1], x) + 0 );
                    }, [ -6, 6 ] );
                  });
                };

                graph.drawExpo();

                graph.CheckPointOnCurve = function(point){
                  if(K*pow(L,point[0])-point[1] &lt; 0.0001){
                    return true;
                  }   
                  else{
                  return false;
                  }   
                };

                graph.showSolution = function(){
                  $("html, body").animate({
                    scrollTop: $(".question").offset().top
                  }, {
                    duration: 500,
                    easing: "swing",
                    complete: function() {
                    var coords = {
                      x1: graph.pointA.coord[0],
                      y1: graph.pointA.coord[1],
                      x2: graph.pointB.coord[0],
                      y2: graph.pointB.coord[1],    
                    };
                    $(coords).delay(100).animate({
                      x1: 0,
                      y1: K,
                      x2: 1,
                      y2: K*L,
                    }, {
                      duration: 500,
                      easing: "linear",
                      step: function(now, fx) {
                        coords[fx.prop] = now;
                        graph.pointA.setCoord([coords.x1, coords.y1]);
                        graph.pointB.setCoord([coords.x2, coords.y2]);
                        graph.drawExpo();
                      }
                    });
                    }
                  });
                };
      </div>
    </p>

    <div class="solution" data-type="custom">
      <div class="instruction" >Drag the two points to graph the equation.</div>
      <div class="guess">[graph.pointA.coord, graph.pointB.coord]</div>
      <div class="validator-function">
        if (graph.CheckPointOnCurve(guess[0]) &amp;&amp; graph.CheckPointOnCurve(guess[1])){
          return true;
        }
        else{
          return false;
        }
      </div>
      <div class="show-guess">
        graph.pointA.setCoord(guess[0]);
        graph.pointB.setCoord(guess[1]);
        graph.drawExpo();
      </div>
    </div>
  </div>

  </div>

    <div class="hints">
      <p>Remember that you can compute y by replacing x with simple values. <code> y = a * b ^ x</code></p>
      <p>If you use <code>x = 0</code> in the equation you can find the first point.</p>
      <p>Then the value of y is: <code> y = <var>K</var> * <var>L</var> ^ 0 =  <var>K</var> </code> </p>
      <p>If you put <code>x = 1</code> in the equation you can find the second point.</p>
      <p>Then the value of y is: <code> y = <var>K</var> * <var>L</var> ^ 1 =  <var>K*L</var> </code> </p>
      <p>The two points are: (0,<var>K</var>) and (1,<var>K*L</var>)<br /><input type="button" value="Show me" onClick="javascript:KhanUtil.currentGraph.graph.showSolution();" /> </p>
    </div>
  </div>
  </body>
  </html>